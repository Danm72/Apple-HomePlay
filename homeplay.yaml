
button_card_templates: !include_dir_merge_named button_card_templates

kiosk_mode:
  hide_header: true

views:
  - type: custom:grid-layout
    title: HomePlay
    background: var(--background)
    layout:
      margin: 0 #0.3vw
      padding: 0
      grid-gap: 0.7vw
      grid-template-columns: 0 1fr 56.5% 12.7% 0
      grid-template-rows: 3vw 53.1vw 5vw
      grid-template-areas: |
        "topbar topbar topbar topbar topbar"
        ". left center right ."
        "taskbar taskbar taskbar taskbar taskbar"

    cards:
      #.............................................................
      #.TTTTTTTTTTT....................ppbb.........................
      #.TTTTTTTTTTT....................ppbb.........................
      #.TTTTTTTTTTT....................ppbb.........................
      #....TTTT....oooooo...ooppppppp..ppbbbbbbb....aaaaaa..aarrrr..
      #....TTTT...Toooooooo.oopppppppp.ppbbbbbbbb..baaaaaaa.aarrrr..
      #....TTTT..TTooo.oooo.ooppp.pppp.ppbbb.bbbbbbbaa.aaaa.aarrr...
      #....TTTT..TToo...oooooopp...ppppppbb...bbbb....aaaaa.aarr....
      #....TTTT..TToo...oooooopp...ppppppbb...bbbb.baaaaaaa.aarr....
      #....TTTT..TToo...oooooopp...ppppppbb...bbbbbbaaaaaaa.aarr....
      #....TTTT..TToo...oooooopp...ppppppbb...bbbbbbaa.aaaa.aarr....
      #....TTTT..TTooo.oooo.ooppp.pppp.ppbbb.bbbb.bbaa.aaaa.aarr....
      #....TTTT...Toooooooo.oopppppppp.ppbbbbbbbb.bbaaaaaaa.aarr....
      #....TTTT....oooooo...ooppppppp..ppbbbbbbb...baaaaaaaaaarr....
      #.....................oopp....................................
      #.....................oopp....................................
      #.....................oopp....................................
      #.....................oopp....................................
      #.............................................................

      - type: horizontal-stack
        view_layout:
          grid-area: topbar
        cards:
          - type: picture-elements
            image: /local/1x1_trans.png
            style: |
              ha-card {
                border-radius: 20px 20px 0px 0px !important;
                --ha-card-background: var(--custom-ha-card-background);
                backdrop-filter: var(--custom-ha-card-backdrop-filter);
                --ha-card-border-color: rgba(0, 0, 0, 0);
                --ha-card-border-width: 0px;
                #margin-left: 0%;
                #margin-right: -4px;
                #margin-top: -8px;
                #margin-bottom: -4px;
              }
        
            elements:
              - type: custom:hui-element
                card_type: horizontal-stack
                style:
                  top: 1.5vw
                  left: 50%
                cards:
                  - type: custom:button-card
                    entity: sensor.temperature_min_max
                    name: Temperature
                    tap_action: !include popup/temperature.yaml
                    template:
                      - topbar
                      - icon_thermometer
    
                  - type: custom:button-card
                    entity: sensor.humidity_min_max
                    name: Humidité
                    template:
                      - topbar
                      - icon_humidity
    
                  - type: custom:button-card
                    entity: sensor.lights_on_count
                    name: Lumières
                    template:
                      - topbar
                      - icon_light
                    styles:
                      card:
                        - background: >
                            [[[
                              if (states['sensor.lights_on_count'].state == '0 lumières allumées') return 'var(--custom-topbar-background)';
                              return "white";
                            ]]]
                      name:
                        - color: >
                            [[[
                              if (states['sensor.lights_on_count'].state == '0 lumières allumées') return 'var(--custom-ha-card-text-color-primary)';
                              return "black";
                            ]]]
                      state:
                        - color: >
                            [[[
                              if (states['sensor.lights_on_count'].state == '0 lumières allumées') return 'var(--custom-ha-card-text-color-third)';
                              return 'rgba(60,60,60,1)';
                            ]]]
        
                  - type: custom:button-card
                    entity: sensor.climate_text
                    name: Climat
                    template:
                      - topbar-climate
                    custom_fields:
                      temperature: >
                        [[[ return states['sensor.climate_temp'].state ]]]
                    tap_action: !include popup/climat.yaml
                      
                  #- type: custom:button-card
                  #  entity: lock.x3_xdrive30i_lock
                  #  name: Voiture
                  #  template:
                  #    - topbar
                  #    - icon_car

                  - type: custom:button-card
                    entity: sensor.battery_min_max
                    name: Batterie
                    template:
                      - topbar
                      - icon_battery_100
                    tap_action: !include popup/battery.yaml
        
      #................................
      #.LLLL..................fffff.ttt..
      #.LLLL.................effffftttt..
      #.LLLL.................efff..tttt..
      #.LLLL........eeeeee..eeffffftttt..
      #.LLLL.......eeeeeeee.eeffffftttt..
      #.LLLL......Leee.eeee..efff..tttt..
      #.LLLL......Leee..eeee.efff..tttt..
      #.LLLL......Leeeeeeeee.efff..tttt..
      #.LLLL......Leeeeeeeee.efff..tttt..
      #.LLLL......Leee.......efff..tttt..
      #.LLLLLLLLLLLeee..eeee.efff..tttt..
      #.LLLLLLLLLL.eeeeeeee..efff..tttt..
      #.LLLLLLLLLL..eeeeee...efff..tttt..
      #..................................
              
      ########################################
      ##            Weather Card            ##
      ########################################

      - type: vertical-stack
        view_layout:
          grid-area: left
        cards:
          - type: picture-elements
            image: /local/weather/empty.png
            style: |
              ha-card {
                border-radius: 1.5vw !important;
                --ha-card-background: rgba(0, 0, 0, 0);
                --ha-card-border-color: rgba(0, 0, 0, 0);
                --ha-card-border-width: 0px;
                height: 33.5vw !important;
                box-shadow: var(--custom-ha-card-box-shadow);
              }

              
            elements:
              - type: image
                entity: sensor.weather_bg_condition2
                action: none
                hold_action: none
                tap_action: none
                style:
                  top: 0px
                  left: 0px
                  transform: none
                  height: 60%
                state_image: !include button_card_templates/weather_bg.yaml
              
              # Feel Like Temperature
              - type: state-label
                entity: sensor.feel_like
                hold_action:
                  action: none
                style:
                  color: rgb(255, 255, 255)
                  font-size: 8vw
                  font-weight: lighter
                  text-align: right
                  left: 50%
                  top: 11%
                  text-shadow: 0px 0px 10px rgba(0,0,0,0.4)
                tap_action:
                  action: none
                  
              - type: state-label
                entity: sensor.montreal_current_condition
                style:
                  left: 50%
                  top: 22%
                  #width: 20vw
                  text-align: center
                  font-weight: 400
                  font-size: 2vw
                  text-shadow: 0px 0px 4px rgba(0,0,0,0.7)
                  color: rgba(255,255,255,1)

              - type: state-label
                entity: sensor.high_low_temp
                style:
                  left: 50%
                  top: 27%
                  text-align: center
                  font-weight: 400
                  font-size: 2vw
                  text-shadow: 0px 0px 4px rgba(0,0,0,0.7)
                  color: rgba(255,255,255,1)
                
              - type: conditional
                conditions:
                  - entity: sensor.weather_warning
                    state: "on"
                elements:
                  - type: custom:button-card
                    entity: sensor.weather_warning_statement_1
                    template:
                      - icon_exclamationmark
                    show_icon: false
                    show_name: false
                    show_state: true
                    show_label: false
                    style:
                      left: 50%
                      top: 34%
                    styles:
                      grid: 
                        - grid-template-areas: '"icon s"'
                        - grid-template-columns: min-content 
                      card:
                        - width: 25vw
                        - background-color: var(--custom-weather-card-background)
                        - backdrop-filter: var(--custom-weather-card-backdrop-filter)
                        - border-radius: 1.3vw
                      state:
                        - justify-content: start
                        - color: white
                      custom_fields:
                        icon:
                          - margin-left: 1.5vw
                          - position: absolute
                          - height: 2vw
                          - width: 2vw
                          - fill: white

      
              - type: custom:mod-card
                style:
                  top: 47%
                  left: 50%
                  width: 95%
                card:
                  type: weather-forecast
                  entity: weather.openweathermap
                  show_current: false
                  show_forecast: true
                  style:
                  card_mod:
                    style: |
                      .forecast-image-icon > * {
                        transform: scale(0.9);
                        background-size: contain !important;
                        background-repeat: no-repeat;
                        filter: drop-shadow(0px 0px 4px rgba(0,0,0,0.4));
                      }
                      .forecast {
                        padding-top: 0.5vw !important;
                        color: rgba(255,255,255,0.8);
                        text-shadow: 0px 0px 4px rgba(0,0,0,0.6);
                        mix-blend-mode: screen;
                        font-size: 1.3vw;
                      }
                      .forecast .temp {
                        color: white;
                        font-size: 1.3vw !important;
                      }
                      ha-card {
                        background: none;
                        padding: 1px !important;
                        
                      }
                  tap_action: !include popup/weather.yaml
              
          ########################################
          ##           Calendar Card            ##
          ########################################
          - !include custom_module_card/calendar_card.yaml
            
      #.........................  ...................................
      #....CCCCCCC..........................ttt....................
      #...CCCCCCCCC........................tttt....................
      #..CCCCCCCCCCC.......................tttt....................
      #..CCCC...CCCCC..eeeeee...nnnnnnnn.nnttttte.eeeeee..errrrrr..
      #.CCCC.....CCC..eeeeeeee..nnnnnnnnnnnttttteeeeeeeee.errrrrr..
      #.CCCC.........eeee.eeee..nnnn.nnnnn.tttt.eeee.eeee.errrr....
      #.CCCC.........eeee..eeee.nnnn..nnnn.tttt.eeee..eeeeerrr.....
      #.CCCC.........eeeeeeeeee.nnnn..nnnn.tttt.eeeeeeeeeeerrr.....
      #.CCCC.....CCC.eeeeeeeeee.nnnn..nnnn.tttt.eeeeeeeeeeerrr.....
      #..CCCC...CCCCCeeee.......nnnn..nnnn.tttt.eeee......errr.....
      #..CCCCCCCCCCC.eeee..eeee.nnnn..nnnn.tttt.eeee..eeeeerrr.....
      #...CCCCCCCCCC..eeeeeeee..nnnn..nnnn.ttttteeeeeeeee.errr.....
      #....CCCCCCC.....eeeeee...nnnn..nnnn.ttttte.eeeeee..errr.....
      #............................................................
  
  
      - view_layout:
          grid-area: center
        type: custom:mod-card
        style:
          swipe-card:
            $: |
              .swiper-pagination {
                display: flex;
                flex-direction: column-reverse;
                width: 4vw  !important;
                left: 0.7vw !important;
                bottom: inherit !important;
                padding: 0;
                top: 0.8vw;
                box-shadow: var(--custom-ha-card-box-shadow);
                border-radius: 1vw;
                background: var(--custom-map-card-control-background-off) !important;
                
              }

              .swiper-pagination-bullet-active {
                --swiper-pagination-color: var(--custom-map-card-control-background-on) !important;
                opacity: 1.0 !important;
              }


              .swiper-pagination-bullets>span {
                margin: 0 !important;
                min-width: 4vw;
                min-height: 4vw;
                display: flex;
                align-items: center;
                justify-content: space-around;
                color: custom-map-card-control-text;
                box-shadow: var(--custom-ha-card-box-shadow);
              }
            
              .swiper-pagination-bullets>span:nth-child(1):before {
                width: 2.2vw;
                height: 2.2vw;
                display: inline-block;
                content: '';
                mask: url('/local/icon/square.3.layers.3d.bottom.filled.svg') no-repeat 50% 50%;
                -webkit-mask: url('/local/icon/square.3.layers.3d.bottom.filled.svg') no-repeat 50% 50%;
                mask-size: cover;
                -webkit-mask-size: cover;
                background-color: var(--custom-map-card-control-text);
              }
              .swiper-pagination-bullets>span:nth-child(1) {
                border-radius: 0 0 1vw 1vw;
              }
              .swiper-pagination-bullets>span:nth-child(2):before {
                width: 2.2vw;
                height: 2.2vw;
                display: inline-block;
                content: '';
                mask: url('/local/icon/square.3.layers.3d.middle.filled.svg') no-repeat 50% 50%;
                -webkit-mask: url('/local/icon/square.3.layers.3d.middle.filled.svg') no-repeat 50% 50%;
                mask-size: cover;
                -webkit-mask-size: cover;
                background-color: var(--custom-map-card-control-text);
              }
              .swiper-pagination-bullets>span:nth-child(2) {
                border-radius: 0 0 0 0;
              }
              .swiper-pagination-bullets>span:nth-child(3):before {
                width: 2.2vw;
                height: 2.2vw;
                display: inline-block;
                content: '';
                mask: url('/local/icon/square.3.layers.3d.top.filled.svg') no-repeat 50% 50%;
                -webkit-mask: url('/local/icon/square.3.layers.3d.top.filled.svg') no-repeat 50% 50%;
                mask-size: cover;
                -webkit-mask-size: cover;
                background-color: var(--custom-map-card-control-text);
            
              }
              .swiper-pagination-bullets>span:nth-child(3) {
                border-radius: 1vw 1vw 0 0;
              }
              .swiper-container {
                box-shadow: var(--custom-ha-card-box-shadow);
                border-radius: 1.5vw;
              }
            
        card:
          type: custom:swipe-card
          start_card: 2
          reset_after: 10
          parameters:
            effect: cards
            spaceBetween: 8
            pagination:
              type: "bullets"
              clickable: true
          cards:
            ###############################
            # BASEMENT FLOOR              #
            ###############################
            - type: picture-elements
              image: /local/house/floor-empty.png
              style: |
                ha-card {
                  border-radius: 20px !important ;
                  border-style: none !important;
                  border-width: 0px !important;
                  border-color: rgba(0,0,0,0) !important;
                }
              elements:
                - type: image
                  entity: input_select.hass_theme_selected
                  state_image:
                    light: /local/house/basement-day.png
                    dark: /local/house/basement-night.png
                  style:
                    Left: 50%
                    top: 50%
                    width: 100%
                  hold_action:
                    action: none
                  tap_action:
                    action: none
                
                - type: custom:button-card
                  entity: input_boolean.homeplay_map_temperature
                  style:
                    left: 2.7vw
                    top: 17vw
                  template:
                    - icon_thermometer
                    - house_map_temperature_switch

                - type: conditional
                  conditions:
                    - entity: input_boolean.homeplay_map_temperature
                      state: "off"
                  elements:
                    - type: custom:button-card
                      entity: switch.switch_basement
                      icon: phu:ceiling-runner-three
                      style:
                        left: 45%
                        top: 32%
                      template:
                        - light
          
                - type: conditional
                  conditions:
                    - entity: input_boolean.homeplay_map_temperature
                      state: "on"
                  elements:
                    - type: custom:button-card
                      entity: sensor.temperaturesensor_basement_temperature
                      style:
                        left: 45%
                        top: 30%
                      template:
                        - house_map_-_temp_hum
                      variables:
                        entity_temp: "[[[ return states['sensor.temperaturesensor_basement_temperature'].state ]]]"
                        entity_hum: "[[[ return states['sensor.temperaturesensor_basement_humidity'].state ]]]"
            ###############################
            # GROUND FLOOR                #
            ###############################
            - type: picture-elements
              image: /local/house/rdc-night.png
              style: |
                ha-card {
                  border-radius: 20px !important ;
                  --ha-card-border-width: 0px;
                }
              elements:
                - type: image
                  entity: input_select.hass_theme_selected
                  state_image:
                    light: /local/house/rdc-day.png
                    dark: /local/house/rdc-night.png
                  style:
                    Left: 50%
                    top: 50%
                    width: 100%
                  hold_action:
                    action: none
                  tap_action:
                    action: none

                - type: custom:button-card
                  entity: input_boolean.homeplay_map_temperature
                  style:
                    left: 2.7vw
                    top: 17vw
                  template:
                    - icon_thermometer
                    - house_map_temperature_switch

                - type: conditional
                  conditions:
                    - entity: input_boolean.homeplay_map_temperature
                      state: "off"
                  elements:
                    - type: custom:button-card
                      entity: light.dimmerlivingroom
                      icon: phu:bulb-group-ceiling-round
                      style:
                        left: 45%
                        top: 32%
                      template:
                        - light

                    - entity: light.light_livingroomentry
                      type: custom:button-card
                      icon: phu:friends-of-hue-iq-pendant
                      style:
                        left: 70%
                        top: 35%
                      template:
                        - light

                    - entity: switch.switchvestibule_switch
                      type: custom:button-card
                      icon: phu:ceiling-fugato-three
                      style:
                        left: 74%
                        top: 17%
                      template:
                        - light

                    - entity: switch.switchexteriorfront
                      type: custom:button-card
                      icon: phu:wall-appear
                      style:
                        left: 72%
                        top: 5%
                      template:
                        - light

                    - entity: switch.switchexterieurback_switch
                      type: custom:button-card
                      icon: phu:wall-flood
                      style:
                        left: 64%
                        top: 95%
                      template:
                        - light

                    - entity: light.floodlight_kitchen
                      name: FloodLight
                      type: custom:button-card
                      icon: phu:ceiling-aurelle
                      style:
                        left: 70%
                        top: 65%
                      template:
                        - light

                    - entity: light.grouplightkitchencounter
                      type: custom:button-card
                      icon: phu:bulb-group-classic-hung-4
                      style:
                        left: 55%
                        top: 65%
                      template:
                        - light

                    - entity: light.stairs_lights
                      type: custom:button-card
                      icon: phu:ceiling-fugato-four-alt
                      style:
                        left: 85%
                        top: 50%
                      template:
                        - light

                    - entity: light.groupspotlightkitchensink
                      type: custom:button-card
                      icon: phu:bulb-group-ceiling-flush-circular
                      style:
                        left: 73%
                        top: 85%
                      template:
                        - light

                    - entity: switch.switchexteriorfrontplug
                      type: custom:button-card
                      show_entity_picture: true
                      style:
                        left: 60%
                        top: 5%
                      template:
                        - switch
                    
                    - entity: media_player.appletv_salon
                      type: custom:button-card
                      entity_picture: /local/icon/appletv.fill.png
                      show_entity_picture: true
                      style:
                        left: 18%
                        top: 40%
                      template:
                        - light

                    - entity: light.dreamview_t1
                      type: custom:button-card
                      style:
                        left: 18%
                        top: 30%
                      template:
                        - light-svg
                        - icon_light_panel

                - type: conditional
                  conditions:
                    - entity: input_boolean.homeplay_map_temperature
                      state: "on"
                  elements:
                    - type: custom:button-card
                      entity: sensor.temperaturesensor_vestibule_temperature
                      style:
                        left: 75%
                        top: 15%
                      template:
                        - house_map_-_temp_hum
                      variables:
                        entity_temp: "[[[ return states['sensor.temperaturesensor_vestibule_temperature'].state ]]]"
                        entity_hum: "[[[ return states['sensor.temperaturesensor_vestibule_humidity'].state ]]]"
                    
                    - type: custom:button-card
                      entity: sensor.entryway_temperature
                      style:
                        left: 45%
                        top: 30%
                      template:
                        - house_map_-_temp_hum
                      variables:
                        entity_temp: "[[[ return states['sensor.entryway_temperature'].state ]]]"
                        entity_hum: "[[[ return states['sensor.entryway_humidity'].state ]]]"
            ###############################
            # 1st floor                   #
            ###############################
            - type: picture-elements
              image: /local/house/1st-floor-night.png
              style: |
                ha-card {
                  border-radius: 20px !important ;
                  --ha-card-border-width: 0px;
                }
              elements:
                - type: image
                  entity: input_select.hass_theme_selected
                  state_image:
                    light: /local/house/1st-floor-day.png
                    dark: /local/house/1st-floor-night.png
                  style:
                    Left: 50%
                    top: 50%
                    width: 100%
                  hold_action:
                    action: none
                  tap_action:
                    action: none

                - type: custom:button-card
                  entity: input_boolean.homeplay_map_temperature
                  style:
                    left: 2.7vw
                    top: 17vw
                  template:
                    - icon_thermometer
                    - house_map_temperature_switch
              
                - type: conditional
                  conditions:
                    - entity: input_boolean.homeplay_map_temperature
                      state: "off"
                  elements:
                    - entity: light.bathroom_light
                      type: custom:button-card
                      icon: mdi:outdoor-lamp
                      style:
                        left: 90%
                        top: 80%
                      template:
                        - light

                    - entity: light.stairs_lights
                      type: custom:button-card
                      icon: phu:ceiling-fugato-four-alt
                      style:
                        left: 76%
                        top: 55%
                      template:
                        - light

                    - entity: switch.smartplugclara
                      type: custom:button-card
                      icon: mdi:apple-icloud
                      style:
                        left: 15%
                        top: 65%
                      template:
                        - light
                    
                    - entity: light.ambientlightbedroomclara_lightbulb
                      type: custom:button-card
                      icon: mdi:lamp
                      style:
                        left: 53%
                        top: 75%
                      template:
                        - light

                    - entity: light.0x000d6ffffe238855
                      type: custom:button-card
                      icon: mdi:floor-lamp
                      style:
                        left: 45%
                        top: 20%
                      template:
                        - light

                    - entity: light.clarabedroom
                      type: custom:button-card
                      icon: phu:ceiling-lamp-round
                      style:
                        left: 33%
                        top: 75%
                      template:
                        - light
                        

                - type: conditional
                  conditions:
                    - entity: input_boolean.homeplay_map_temperature
                      state: "on"
                  elements:
                    - type: custom:button-card
                      entity: sensor.temperaturesensor_clara_temperature
                      style:
                        left: 40%
                        top: 75%
                      template:
                        - house_map_-_temp_hum
                      variables:
                        entity_temp: "[[[ return states['sensor.temperaturesensor_clara_temperature'].state ]]]"
                        entity_hum: "[[[ return states['sensor.temperaturesensor_clara_humidity'].state ]]]"
                    - type: custom:button-card
                      entity: sensor.temperaturesensor_masterbedroom_temperature
                      style:
                        left: 35%
                        top: 30%
                      template:
                        - house_map_-_temp_hum
                      variables:
                        entity_temp: "[[[ return states['sensor.temperaturesensor_masterbedroom_temperature'].state ]]]"
                        entity_hum: "[[[ return states['sensor.temperaturesensor_masterbedroom_humidity'].state ]]]"
                    - type: custom:button-card
                      entity: sensor.temperaturesensor_upperbathroom_temperature
                      style:
                        left: 70%
                        top: 83%
                      template:
                        - house_map_-_temp_hum
                      variables:
                        entity_temp: "[[[ return states['sensor.temperaturesensor_upperbathroom_temperature'].state ]]]"
                        entity_hum: "[[[ return states['sensor.temperaturesensor_upperbathroom_humidity'].state ]]]"
                    - type: custom:button-card
                      entity: sensor.temperaturesensor_office_temperature
                      style:
                        left: 65%
                        top: 25%
                      template:
                        - house_map_-_temp_hum
                      variables:
                        entity_temp: "[[[ return states['sensor.temperaturesensor_office_temperature'].state ]]]"
                        entity_hum: "[[[ return states['sensor.temperaturesensor_office_humidity'].state ]]]"
      #...............................................
      #.RRRRRRRRRR...iiii............hhhh........ttt..
      #.RRRRRRRRRRR..iiii............hhhh.......tttt..
      #.RRRRRRRRRRR..................hhhh.......tttt..
      #.RRRR...RRRRR.iiii..ggggggggg.hhhhhhhh.hhtttt..
      #.RRRR...RRRRR.iiii.gggggggggg.hhhhhhhhhhhtttt..
      #.RRRRRRRRRRR..iiiiigggg.ggggg.hhhh.hhhhh.tttt..
      #.RRRRRRRRRRR..iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRRRRRR.....iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRR.RRRR....iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRR..RRRR...iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRR..RRRRR..iiiiigggg.ggggg.hhhh..hhhh.tttt..
      #.RRRR...RRRRR.iiii.gggggggggg.hhhh..hhhh.tttt..
      #.RRRR....RRRR.iiii..ggggggggg.hhhh..hhhh.tttt..
      #.........................gggg..................
      #..................igggg.gggg...................
      #...................ggggggggg...................
      #....................ggggggg....................
      #...............................................

      - type: vertical-stack
        view_layout:
          grid-area: right
        cards:
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "on"
            card:

              type: custom:button-card
              entity: person.sebastien_logeais
              template: person
              variables:
                picture: '/local/person/seb.jpg'  #Picture in WWW folder
                travel_time: "[[[ return states['sensor.seb_work_travel_time'].state ]]]"
    
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.washing_machine
                state_not: "Off"
            card:
              type: custom:button-card
              entity: input_select.washing_machine
              name: Laveuse
              icon: fapro:Icons=washer.fill
              template:
                - washer-dryer
      
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.washing_machine
                state: "Off"
            card:
      
              type: custom:button-card
              entity: person.sebastien_logeais
              template: person
              variables:
                picture: '/local/person/seb.jpg'  #Picture in WWW folder
                travel_time: "[[[ return states['sensor.seb_work_travel_time'].state ]]]"

          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "on"
            card:
              
              type: custom:button-card
              entity: person.lynn
              template: person_bus
              variables:
                picture: '/local/person/lynn'  #Picture in WWW folder
                bus_line: "[[[ return states['sensor.491_express_est'].state ]]]"
            
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.dryer_machine
                state_not: "Off"
            card:
              type: custom:button-card
              entity: input_select.dryer_machine
              name: Sécheuse
              icon: fapro:Icons=dryer.fill
              template:
                - washer-dryer
      
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.dryer_machine
                state: "Off"
            card:
    
              type: custom:button-card
              entity: person.lynn
              template: person_bus
              variables:
                picture: '/local/person/lynn'  #Picture in WWW folder
                bus_line: "[[[ return states['sensor.491_express_est'].state ]]]"
                #bus_line_next: "[[[ return state_attr('sensor.191_bus_est', 'Next bus') ]]]"
      
          - type: custom:button-card
            entity: schedule.garbage
            name: Poubelle
            icon: fapro:Icons=trash.fill
            label: "[[[ return states['sensor.garbage_weekday'].state ]]]"
            template:
              - garbage

          - type: custom:button-card
            entity: schedule.recycling
            name: Recyclage
            icon: fapro:Icons=recycling.fill
            label: "[[[ return states['sensor.recycling_weekday'].state ]]]"
            template:
              - garbage
        

          - type: grid
            square: true
            columns: 2
            cards:
  
              - type: custom:button-card
                entity: input_boolean.scene_clara_dodo
                template: 
                  - icon_scene_clara_dodo
                  - scene
              
              - type: custom:button-card
                entity: input_boolean.scene_reveil
                template: 
                  - icon_scene_reveil
                  - scene

              - type: custom:button-card
                entity: input_boolean.scene_invite
                template: 
                  - icon_scene_invite
                  - scene
              
              - type: custom:button-card
                entity: input_boolean.scene_invite
                template: 
                  - scene
          #- type: custom:button-card
          #  entity: sensor.recycling
          #  name: Recyclage
          #  icon: fapro:Icons=recycling.fill
          #  template:
          #    - garbage

      #.....................................................................
      #.TTTTTTTTTTT..................sssk......kkkb.........................
      #.TTTTTTTTTTT..................sssk......kkkb.........................
      #.TTTTTTTTTTT..................sssk......kkkb.........................
      #....TTTT....aaaaaa...aasssss..sssk.kkkkkkkkbbbbbb....baaaaa..aaarrr..
      #....TTTT...Taaaaaaa.aaassssss.ssskkkkkk.kkkbbbbbbb..bbaaaaaa.aaarrr..
      #....TTTT..TTaa.aaaa.aaas.ssss.ssskkkkk..kkkbb.bbbbbbbba.aaaa.aaarr...
      #....TTTT......aaaaa.aaass.....ssskkkk...kkkb...bbbb....aaaaa.aaar....
      #....TTTT...Taaaaaaa.aaassss...ssskkkk...kkkb...bbbb.bbaaaaaa.aaar....
      #....TTTT..TTaaaaaaa...assssss.ssskkkkk..kkkb...bbbbbbbaaaaaa.aaar....
      #....TTTT..TTaa.aaaa......sssssssskkkkkk.kkkb...bbbbbbba.aaaa.aaar....
      #....TTTT..TTaa.aaaa.aaas..sssssssk.kkkk.kkkbb.bbbb.bbba.aaaa.aaar....
      #....TTTT..TTaaaaaaa.aaassssss.sssk..kkkkkkkbbbbbbb.bbbaaaaaa.aaar....
      #....TTTT...Taaaaaaaa..asssss..sssk..kkkkkkkbbbbbb...bbaaaaaaaaaar....
      #.....................................................................

      - type: horizontal-stack
        view_layout:
          grid-area: taskbar
        cards:
          - type: picture-elements
            image: /local/1x1_trans.png
            style: |
              ha-card {
                border-radius: 0px 0px 20px 20px !important;
                --ha-card-background: var(--custom-ha-card-background);
                backdrop-filter: var(--custom-ha-card-backdrop-filter);
                --ha-card-border-color: rgba(0, 0, 0, 0);
                --ha-card-border-width: 0px;
              }

            elements:
              - type: state-label
                entity: sensor.time
                style:
                  top: 2.5vw
                  left: 94%
                  color: var(--custom-ha-card-text-color-primary)
                  font-size: 4.3vw
                  font-weight: 300
                  letter-spacing: "-0.2vw"
                  width: 12vw
                  height: 6.15vw
                  display: flex #enable alignement
                  align-items: center #Verticaly align
                  justify-content: center #Horizontaly align
                  background: var(--custom-ha-card-background-revert)
                  border-radius: 0px 0px 20px 0px
                action: none
                hold_action: none
                tap_action: none
          
              # Weekday
              - type: state-label
                entity: sensor.day
            
                style:
                  top: 1.6vw
                  left: 87%
                  transform: translate(-100%, -50%)
                  color: var(--custom-ha-card-text-color-secondary)
                  font-size: 2vw
                  font-weight: 400
                  letter-spacing: "-0.05vw"
                  display: flex #enable alignement
                  justify-content: right
                action: none
                hold_action: none
                tap_action: none

              # day + Month
              - type: state-label
                entity: sensor.month
                style:
                  top: 3.6vw
                  left: 87%
                  transform: translate(-100%, -50%)
                  color: var(--custom-ha-card-text-color-secondary)
                  font-size: 2vw
                  font-weight: 400
                  letter-spacing: "-0.05vw"
                  display: flex #enable alignement
                  justify-content: right
                  width: 120px
                action: none
                hold_action: none
                tap_action: none
            
              #....................................................
              #.....AAAAA.....PPPPPPPPP...PPPPPPPPP....SSSSSSS.....
              #.....AAAAA.....PPPPPPPPPP..PPPPPPPPPP..SSSSSSSSS....
              #....AAAAAA.....PPPPPPPPPPP.PPPPPPPPPPP.SSSSSSSSSS...
              #....AAAAAAA....PPPP...PPPP.PPPP...PPPPPSSSS..SSSS...
              #...AAAAAAAA....PPPP...PPPP.PPPP...PPPPPSSSS.........
              #...AAAAAAAA....PPPPPPPPPPP.PPPPPPPPPPP.SSSSSSS......
              #...AAAA.AAAA...PPPPPPPPPP..PPPPPPPPPP...SSSSSSSSS...
              #..AAAAAAAAAA...PPPPPPPPP...PPPPPPPPP......SSSSSSS...
              #..AAAAAAAAAAA..PPPP........PPPP..............SSSSS..
              #..AAAAAAAAAAA..PPPP........PPPP.......PSSS....SSSS..
              #.AAAA....AAAA..PPPP........PPPP.......PSSSSSSSSSSS..
              #.AAAA.....AAAA.PPPP........PPPP........SSSSSSSSSS...
              #.AAAA.....AAAA.PPPP........PPPP.........SSSSSSSS....
              #....................................................
            
              - type: custom:button-card
                entity: alarm_control_panel.alarme
                icon: fapro:Icons=gearshape.fill
                size: 60%
                style:
                  top: 2.5vw
                  left: 3.5%
                template:
                  - setting_icon
                tap_action:
                  action: navigate
                  navigation_path: /config/integrations/dashboard
      
              - type: custom:button-card
                entity: alarm_control_panel.alarme
                icon: fapro:setting
                size: 75%
                style:
                  top: 2.5vw
                  left: 9%
                template:
                  - setting_icon
                tap_action: !include popup/setting.yaml

              - type: custom:hui-element
                card_type: horizontal-stack
                style:
                  top: 2.5vw
                  left: 50%
                  padding-right: 1.4vw
                  padding-left: 1.4vw
                  padding-top: 0.6vw
                  padding-bottom: 0.5vw
                  background: var(--custom-ha-card-background-revert)
                cards:
                  - type: custom:button-card
                    entity: group.hass_update_notification
                    entity_picture: /local/icon/home_assistant.png
                    template:
                      - apps
                    tap_action: !include popup/homeassistant.yaml

                  - type: custom:button-card
                    entity: group.router_update_notification
                    entity_picture: /local/icon/wifi.png
                    template:
                      - apps
                    tap_action: !include popup/wifi.yaml

                  - type: custom:button-card
                    entity: alarm_control_panel.alarme
                    entity_picture: /local/icon/alarm2.png
                    template:
                      - apps
                    #tap_action:
                    #  !include popup/alarm.yaml

                  - type: custom:button-card
                    entity: binary_sensor.server_security_status
                    entity_picture: /local/icon/server.png
                    template:
                      - apps
                    tap_action: !include popup/server.yaml
